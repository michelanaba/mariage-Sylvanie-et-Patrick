<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Mariage de Yvana et Patrick– Accueil</title>
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <main class="card">
    <div class="ring" aria-hidden="true"></div>
    <div class="badge">Mariage de Yvana et Patrick</div>
    <h1>Bienvenue au mariage de <span class="gold">Yvana et patrick</span></h1>
    <p class="subtitle">Veuillez entrer votre nom pour connaître votre numéro de table.</p>
    <div class="field">
      <input id="nom" type="text" inputmode="text" autocomplete="name" placeholder="Votre nom (ex. mike)" aria-label="Votre nom" />
      <button id="go">Valider</button>
    </div>
    <div id="error" class="err" role="alert" aria-live="polite" hidden>Nom introuvable. Vérifiez l’orthographe ou contactez l’accueil.</div>
    <p class="helper">Conseil : pas sensible aux majuscules/accents.</p>
    <div class="footer">Scannez le QR → entrez votre nom → votre table s'affichera.</div>
  </main>
 <script>
    const normalize = s => (s||"").trim().toLowerCase()
            .normalize('NFD').replace(/[\u0300-\u036f]/g,'');

    let TABLES = {};
    fetch('guests_tables_yvie.json')
            .then(r => r.json())
            .then(data => { TABLES = data; });

    document.getElementById('go').addEventListener('click', ()=>{
      const raw = document.getElementById('nom').value;
      const key = normalize(raw);
      const num = TABLES[key];
      if(num !== undefined){
        location.href = 'table' + num + '.html?name=' + encodeURIComponent(raw.trim());
      } else { document.getElementById('error').style.display = 'block'; }
    });
  </script>
</body>
</html>
